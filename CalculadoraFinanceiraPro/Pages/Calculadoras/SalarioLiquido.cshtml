@page "/calculadora/salario-liquido"
@model CalculadoraFinanceiraPro.Pages.Calculadoras.SalarioLiquidoModel
@{
    ViewData["Title"] = "Calculadora de Salário Líquido - Calcule INSS e IRRF 2024";
    ViewData["Description"] = "Calcule seu salário líquido com desconto de INSS e IRRF 2024. Simulador gratuito e atualizado com as tabelas oficiais. Inclua dependentes e veja o resultado final.";
    ViewData["Keywords"] = "calculadora salario liquido, calcular salario liquido, desconto inss, desconto irrf, salario liquido 2024, simulador salario";
}

<div class="container py-4">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-page="/Index">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Calculadora de Salário Líquido</li>
        </ol>
    </nav>

    <div class="row">
        <!-- Calculator Form -->
        <div class="col-lg-8">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-primary text-white">
                    <h1 class="h4 mb-0">
                        <i class="bi bi-cash-stack me-2"></i>
                        Calculadora de Salário Líquido 2024
                    </h1>
                </div>
                <div class="card-body p-4">
                    <p class="text-muted mb-4">
                        Calcule seu salário líquido considerando os descontos de INSS e Imposto de Renda 
                        com as tabelas atualizadas de 2024. Inclua seus dependentes para um cálculo mais preciso.
                    </p>

                    <form method="post" id="salarioForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="SalarioBruto" class="form-label">
                                    <i class="bi bi-currency-dollar text-primary me-1"></i>
                                    Salário Bruto (R$)
                                </label>
                                <input asp-for="SalarioBruto" class="form-control form-control-lg" 
                                       placeholder="Ex: 5000,00" step="0.01" min="0" 
                                       oninput="formatCurrency(this); calculateSalary();" />
                                <span asp-validation-for="SalarioBruto" class="text-danger"></span>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label asp-for="Dependentes" class="form-label">
                                    <i class="bi bi-people text-primary me-1"></i>
                                    Número de Dependentes
                                </label>
                                <select asp-for="Dependentes" class="form-select form-select-lg" 
                                        onchange="calculateSalary();">
                                    @for (int i = 0; i <= 10; i++)
                                    {
                                        <option value="@i">@i @(i == 1 ? "dependente" : "dependentes")</option>
                                    }
                                </select>
                                <small class="form-text text-muted">
                                    Cada dependente deduz R$ 189,59 da base de cálculo do IRRF
                                </small>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-center mb-4">
                            <button type="submit" class="btn btn-primary btn-lg me-md-2">
                                <i class="bi bi-calculator me-2"></i>
                                Calcular Salário Líquido
                            </button>
                            <button type="button" class="btn btn-outline-secondary btn-lg" 
                                    onclick="clearForm()">
                                <i class="bi bi-arrow-clockwise me-2"></i>
                                Limpar
                            </button>
                        </div>
                    </form>

                    @if (Model.CalculoRealizado)
                    {
                        <div class="result-section fade-in">
                            <h3 class="text-center mb-4">
                                <i class="bi bi-check-circle-fill text-success me-2"></i>
                                Resultado do Cálculo
                            </h3>
                            
                            <div class="result-highlight">
                                <div class="result-label">Salário Líquido</div>
                                <div class="result-value">@Model.SalarioLiquido.ToString("C", new System.Globalization.CultureInfo("pt-BR"))</div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="result-item">
                                        <span class="result-label">
                                            <i class="bi bi-currency-dollar text-primary me-1"></i>
                                            Salário Bruto
                                        </span>
                                        <span class="result-value text-dark">
                                            @Model.SalarioBruto.ToString("C", new System.Globalization.CultureInfo("pt-BR"))
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="result-item">
                                        <span class="result-label">
                                            <i class="bi bi-people text-info me-1"></i>
                                            Dependentes
                                        </span>
                                        <span class="result-value text-dark">@Model.Dependentes</span>
                                    </div>
                                </div>
                            </div>

                            <h5 class="mt-4 mb-3">Descontos Detalhados</h5>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="result-item">
                                        <span class="result-label">
                                            <i class="bi bi-shield text-warning me-1"></i>
                                            INSS (@Model.AliquotaINSS.ToString("F1")%)
                                        </span>
                                        <span class="result-value text-danger">
                                            -@Model.DescontoINSS.ToString("C", new System.Globalization.CultureInfo("pt-BR"))
                                        </span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="result-item">
                                        <span class="result-label">
                                            <i class="bi bi-file-text text-info me-1"></i>
                                            IRRF (@Model.AliquotaIRRF.ToString("F1")%)
                                        </span>
                                        <span class="result-value text-danger">
                                            -@Model.DescontoIRRF.ToString("C", new System.Globalization.CultureInfo("pt-BR"))
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-4 text-center">
                                <small class="text-muted">
                                    <i class="bi bi-info-circle me-1"></i>
                                    Cálculo baseado nas tabelas oficiais de INSS e IRRF 2024
                                </small>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>

        <!-- Sidebar Info -->
        <div class="col-lg-4">
            <!-- How it Works -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="bi bi-lightbulb text-warning me-2"></i>
                        Como Funciona
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-flex mb-3">
                        <div class="flex-shrink-0">
                            <span class="badge bg-primary rounded-pill">1</span>
                        </div>
                        <div class="ms-3">
                            <strong>INSS</strong>
                            <p class="small text-muted mb-0">
                                Desconto calculado pela tabela progressiva do INSS 2024
                            </p>
                        </div>
                    </div>
                    <div class="d-flex mb-3">
                        <div class="flex-shrink-0">
                            <span class="badge bg-primary rounded-pill">2</span>
                        </div>
                        <div class="ms-3">
                            <strong>Base IRRF</strong>
                            <p class="small text-muted mb-0">
                                Salário bruto - INSS - (dependentes × R$ 189,59)
                            </p>
                        </div>
                    </div>
                    <div class="d-flex">
                        <div class="flex-shrink-0">
                            <span class="badge bg-primary rounded-pill">3</span>
                        </div>
                        <div class="ms-3">
                            <strong>IRRF</strong>
                            <p class="small text-muted mb-0">
                                Imposto de Renda calculado pela tabela progressiva 2024
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- INSS Table -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="bi bi-table text-info me-2"></i>
                        Tabela INSS 2024
                    </h6>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-sm mb-0">
                            <tbody>
                                <tr>
                                    <td class="small">Até R$ 1.412,00</td>
                                    <td class="small text-end">7,5%</td>
                                </tr>
                                <tr>
                                    <td class="small">R$ 1.412,01 a R$ 2.666,68</td>
                                    <td class="small text-end">9,0%</td>
                                </tr>
                                <tr>
                                    <td class="small">R$ 2.666,69 a R$ 4.000,03</td>
                                    <td class="small text-end">12,0%</td>
                                </tr>
                                <tr>
                                    <td class="small">R$ 4.000,04 a R$ 7.786,02</td>
                                    <td class="small text-end">14,0%</td>
                                </tr>
                                <tr class="table-warning">
                                    <td class="small"><strong>Teto INSS</strong></td>
                                    <td class="small text-end"><strong>R$ 908,85</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- IRRF Table -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="bi bi-table text-success me-2"></i>
                        Tabela IRRF 2024
                    </h6>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-sm mb-0">
                            <tbody>
                                <tr>
                                    <td class="small">Até R$ 2.112,00</td>
                                    <td class="small text-end">Isento</td>
                                </tr>
                                <tr>
                                    <td class="small">R$ 2.112,01 a R$ 2.826,65</td>
                                    <td class="small text-end">7,5%</td>
                                </tr>
                                <tr>
                                    <td class="small">R$ 2.826,66 a R$ 3.751,05</td>
                                    <td class="small text-end">15,0%</td>
                                </tr>
                                <tr>
                                    <td class="small">R$ 3.751,06 a R$ 4.664,68</td>
                                    <td class="small text-end">22,5%</td>
                                </tr>
                                <tr>
                                    <td class="small">Acima de R$ 4.664,68</td>
                                    <td class="small text-end">27,5%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Related Calculators -->
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="bi bi-link text-primary me-2"></i>
                        Calculadoras Relacionadas
                    </h6>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a asp-page="/Calculadoras/HoraExtra" class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-clock me-1"></i> Hora Extra
                        </a>
                        <a asp-page="/Calculadoras/DecimoTerceiro" class="btn btn-outline-success btn-sm">
                            <i class="bi bi-gift me-1"></i> 13º Salário
                        </a>
                        <a asp-page="/Calculadoras/Ferias" class="btn btn-outline-info btn-sm">
                            <i class="bi bi-calendar me-1"></i> Férias
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function formatCurrency(input) {
            let value = input.value.replace(/\D/g, '');
            value = (value / 100).toFixed(2);
            input.value = value.replace('.', ',');
        }

        function calculateSalary() {
            const salarioInput = document.getElementById('SalarioBruto');
            const dependentesSelect = document.getElementById('Dependentes');
            
            if (salarioInput.value && parseFloat(salarioInput.value.replace(',', '.')) > 0) {
                // Auto-submit form for real-time calculation
                setTimeout(() => {
                    document.getElementById('salarioForm').submit();
                }, 500);
            }
        }

        function clearForm() {
            document.getElementById('salarioForm').reset();
            location.reload();
        }

        // Format initial value if exists
        document.addEventListener('DOMContentLoaded', function() {
            const salarioInput = document.getElementById('SalarioBruto');
            if (salarioInput.value) {
                formatCurrency(salarioInput);
            }
        });
    </script>
}

<!-- SEO Schema -->
<script type="application/ld+json">
{
  "@@context": "https://schema.org",
  "@@type": "WebApplication",
  "name": "Calculadora de Salário Líquido",
  "description": "Calcule seu salário líquido com desconto de INSS e IRRF 2024",
  "url": "@Context.Request.GetDisplayUrl()",
  "applicationCategory": "Finance",
  "operatingSystem": "Web",
  "offers": {
    "@@type": "Offer",
    "price": "0",
    "priceCurrency": "BRL"
  },
  "author": {
    "@@type": "Organization",
    "name": "Calculadora Financeira Pro"
  }
}
</script>