@page "/calculadora/juros-compostos"
@model CalculadoraFinanceiraPro.Pages.Calculadoras.JurosCompostosModel
@{
    ViewData["Title"] = "Calculadora de Juros Compostos - Simulador de Investimentos 2024";
    ViewData["Description"] = "Calcule juros compostos e simule seus investimentos. Veja como seu dinheiro pode crescer com aportes mensais. Calculadora gratuita e completa.";
    ViewData["Keywords"] = "juros compostos, calculadora investimento, simulador investimento, juros sobre juros, aportes mensais, rentabilidade";
}

<div class="container py-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-page="/Index">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">Juros Compostos</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-warning text-dark">
                    <h1 class="h4 mb-0">
                        <i class="bi bi-graph-up-arrow me-2"></i>
                        Calculadora de Juros Compostos
                    </h1>
                </div>
                <div class="card-body p-4">
                    <p class="text-muted mb-4">
                        Descubra o poder dos juros compostos! Simule o crescimento dos seus investimentos 
                        com ou sem aportes mensais e veja a mágica dos "juros sobre juros".
                    </p>

                    <form method="post" id="jurosForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="ValorInicial" class="form-label">
                                    <i class="bi bi-piggy-bank text-success me-1"></i>
                                    Investimento Inicial (R$)
                                </label>
                                <input asp-for="ValorInicial" class="form-control form-control-lg" 
                                       placeholder="Ex: 10.000,00" step="0.01" min="0.01"
                                       oninput="formatCurrency(this); calculateInterest();" />
                                <span asp-validation-for="ValorInicial" class="text-danger"></span>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label asp-for="AporteMensal" class="form-label">
                                    <i class="bi bi-arrow-repeat text-info me-1"></i>
                                    Aporte Mensal (R$)
                                </label>
                                <input asp-for="AporteMensal" class="form-control form-control-lg" 
                                       placeholder="Ex: 500,00" step="0.01" min="0"
                                       oninput="formatCurrency(this); calculateInterest();" />
                                <span asp-validation-for="AporteMensal" class="text-danger"></span>
                                <small class="form-text text-muted">Opcional: valor investido mensalmente</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="TaxaJurosMensal" class="form-label">
                                    <i class="bi bi-percent text-warning me-1"></i>
                                    Taxa de Juros Mensal (%)
                                </label>
                                <input asp-for="TaxaJurosMensal" class="form-control form-control-lg" 
                                       placeholder="Ex: 0,8" step="0.01" min="0.01" max="50"
                                       onchange="updateAnualRate(); calculateInterest();" />
                                <span asp-validation-for="TaxaJurosMensal" class="text-danger"></span>
                                <small class="form-text text-muted" id="taxaAnual">
                                    Taxa anual equivalente será calculada
                                </small>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label asp-for="PeriodoMeses" class="form-label">
                                    <i class="bi bi-calendar3 text-primary me-1"></i>
                                    Período (meses)
                                </label>
                                <select asp-for="PeriodoMeses" class="form-select form-select-lg" 
                                        onchange="calculateInterest();">
                                    <option value="12">1 ano (12 meses)</option>
                                    <option value="24">2 anos (24 meses)</option>
                                    <option value="36">3 anos (36 meses)</option>
                                    <option value="48">4 anos (48 meses)</option>
                                    <option value="60" selected>5 anos (60 meses)</option>
                                    <option value="120">10 anos (120 meses)</option>
                                    <option value="180">15 anos (180 meses)</option>
                                    <option value="240">20 anos (240 meses)</option>
                                    <option value="300">25 anos (300 meses)</option>
                                    <option value="360">30 anos (360 meses)</option>
                                </select>
                                <span asp-validation-for="PeriodoMeses" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-center mb-4">
                            <button type="submit" class="btn btn-warning btn-lg me-md-2">
                                <i class="bi bi-calculator me-2"></i>
                                Calcular Investimento
                            </button>
                            <button type="button" class="btn btn-outline-secondary btn-lg" 
                                    onclick="clearForm()">
                                <i class="bi bi-arrow-clockwise me-2"></i>
                                Limpar
                            </button>
                        </div>
                    </form>

                    @if (Model.CalculoRealizado)
                    {
                        <div class="result-section fade-in">
                            <h3 class="text-center mb-4">
                                <i class="bi bi-trophy-fill text-warning me-2"></i>
                                Resultado da Simulação
                            </h3>
                            
                            <div class="result-highlight">
                                <div class="result-label">Valor Final do Investimento</div>
                                <div class="result-value">@Model.ValorFinal.ToString("C", new System.Globalization.CultureInfo("pt-BR"))</div>
                            </div>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card border-success mb-3">
                                        <div class="card-body text-center">
                                            <i class="bi bi-piggy-bank-fill text-success" style="font-size: 2rem;"></i>
                                            <h6 class="card-title mt-2">Total Investido</h6>
                                            <h5 class="text-success">
                                                @Model.TotalInvestido.ToString("C", new System.Globalization.CultureInfo("pt-BR"))
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card border-warning mb-3">
                                        <div class="card-body text-center">
                                            <i class="bi bi-graph-up text-warning" style="font-size: 2rem;"></i>
                                            <h6 class="card-title mt-2">Total de Juros</h6>
                                            <h5 class="text-warning">
                                                @Model.TotalJuros.ToString("C", new System.Globalization.CultureInfo("pt-BR"))
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card border-primary mb-3">
                                        <div class="card-body text-center">
                                            <i class="bi bi-percent text-primary" style="font-size: 2rem;"></i>
                                            <h6 class="card-title mt-2">Rentabilidade</h6>
                                            <h5 class="text-primary">
                                                @Model.Rentabilidade.ToString("F1")%
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Investment Breakdown -->
                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <h6>Composição do Investimento:</h6>
                                    <div class="progress mb-2" style="height: 30px;">
                                        @{
                                            var percentInvestido = (Model.TotalInvestido / Model.ValorFinal) * 100;
                                            var percentJuros = (Model.TotalJuros / Model.ValorFinal) * 100;
                                        }
                                        <div class="progress-bar bg-success" style="width: @percentInvestido.ToString("F1", System.Globalization.CultureInfo.InvariantCulture)%">
                                            @percentInvestido.ToString("F0")%
                                        </div>
                                        <div class="progress-bar bg-warning" style="width: @percentJuros.ToString("F1", System.Globalization.CultureInfo.InvariantCulture)%">
                                            @percentJuros.ToString("F0")%
                                        </div>
                                    </div>
                                    <div class="small">
                                        <span class="badge bg-success me-2">Investido</span>
                                        <span class="badge bg-warning">Juros</span>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <h6>Detalhes da Simulação:</h6>
                                    <ul class="list-unstyled small">
                                        <li><i class="bi bi-check text-success me-1"></i> Período: @(Model.PeriodoMeses/12) anos (@Model.PeriodoMeses meses)</li>
                                        <li><i class="bi bi-check text-success me-1"></i> Taxa mensal: @Model.TaxaJurosMensal%</li>
                                        @if (Model.AporteMensal > 0)
                                        {
                                            <li><i class="bi bi-check text-success me-1"></i> @Model.PeriodoMeses aportes de @Model.AporteMensal.ToString("C")</li>
                                        }
                                    </ul>
                                </div>
                            </div>

                            <div class="alert alert-info mt-4">
                                <h6><i class="bi bi-lightbulb me-2"></i>O Poder dos Juros Compostos</h6>
                                <p class="mb-2">
                                    Seus juros de <strong>@Model.TotalJuros.ToString("C")</strong> representam 
                                    <strong>@percentJuros.ToString("F0")%</strong> do valor final!
                                </p>
                                @if (Model.AporteMensal > 0)
                                {
                                    <p class="mb-0">
                                        Com aportes regulares, você maximiza o efeito dos juros compostos, 
                                        criando uma verdadeira "bola de neve" financeira.
                                    </p>
                                }
                                else
                                {
                                    <p class="mb-0">
                                        Considere fazer aportes mensais para potencializar ainda mais seus resultados!
                                    </p>
                                }
                            </div>

                            <div class="mt-4 text-center">
                                <small class="text-muted">
                                    <i class="bi bi-info-circle me-1"></i>
                                    Simulação com taxa de @Model.TaxaJurosMensal% a.m. por @Model.PeriodoMeses meses
                                </small>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>

        <!-- Sidebar Info -->
        <div class="col-lg-4">
            <!-- Compound Interest Explanation -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="bi bi-question-circle text-primary me-2"></i>
                        O que são Juros Compostos?
                    </h5>
                </div>
                <div class="card-body">
                    <p class="small">
                        Juros compostos são os <strong>"juros sobre juros"</strong>. 
                        A cada período, você ganha juros não apenas sobre o valor inicial, 
                        mas também sobre todos os juros acumulados anteriormente.
                    </p>
                    <div class="text-center">
                        <div class="badge bg-primary p-2">
                            <strong>Mês 1:</strong> R$ 1.000 + R$ 10 = R$ 1.010
                        </div>
                        <div class="my-2">↓</div>
                        <div class="badge bg-success p-2">
                            <strong>Mês 2:</strong> R$ 1.010 + R$ 10,10 = R$ 1.020,10
                        </div>
                    </div>
                </div>
            </div>

            <!-- Investment Tips -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="bi bi-lightbulb text-warning me-2"></i>
                        Dicas de Investimento
                    </h6>
                </div>
                <div class="card-body">
                    <div class="small">
                        <div class="mb-3">
                            <i class="bi bi-check-circle text-success me-1"></i>
                            <strong>Comece cedo:</strong> O tempo é seu melhor aliado
                        </div>
                        <div class="mb-3">
                            <i class="bi bi-check-circle text-success me-1"></i>
                            <strong>Seja constante:</strong> Aportes regulares potencializam os resultados
                        </div>
                        <div class="mb-3">
                            <i class="bi bi-check-circle text-success me-1"></i>
                            <strong>Tenha disciplina:</strong> Não retire o dinheiro antes do prazo
                        </div>
                        <div class="mb-0">
                            <i class="bi bi-check-circle text-success me-1"></i>
                            <strong>Diversifique:</strong> Não coloque todos os ovos na mesma cesta
                        </div>
                    </div>
                </div>
            </div>

            <!-- Common Rates -->
            <div class="card border-0 shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="bi bi-graph-up text-info me-2"></i>
                        Taxas de Referência
                    </h6>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-sm mb-0">
                            <tbody>
                                <tr>
                                    <td class="small">Poupança</td>
                                    <td class="small text-end">~0,5% a.m.</td>
                                </tr>
                                <tr>
                                    <td class="small">CDB</td>
                                    <td class="small text-end">0,7-1,2% a.m.</td>
                                </tr>
                                <tr>
                                    <td class="small">Tesouro Selic</td>
                                    <td class="small text-end">~1,0% a.m.</td>
                                </tr>
                                <tr>
                                    <td class="small">Fundos DI</td>
                                    <td class="small text-end">0,8-1,1% a.m.</td>
                                </tr>
                                <tr class="table-warning">
                                    <td class="small"><strong>Meta SELIC</strong></td>
                                    <td class="small text-end"><strong>~12,25% a.a.</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Related Calculators -->
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="bi bi-link text-primary me-2"></i>
                        Calculadoras Relacionadas
                    </h6>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a asp-page="/Calculadoras/TesouroDireto" class="btn btn-outline-info btn-sm">
                            <i class="bi bi-bank me-1"></i> Tesouro Direto
                        </a>
                        <a asp-page="/Calculadoras/CdbLci" class="btn btn-outline-success btn-sm">
                            <i class="bi bi-pie-chart me-1"></i> CDB/LCI/LCA
                        </a>
                        <a asp-page="/Calculadoras/InflacaoReal" class="btn btn-outline-warning btn-sm">
                            <i class="bi bi-arrow-up me-1"></i> Inflação Real
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function formatCurrency(input) {
            let value = input.value.replace(/\D/g, '');
            value = (value / 100).toFixed(2);
            input.value = value.replace('.', ',');
        }

        function updateAnualRate() {
            const taxaMensal = document.getElementById('TaxaJurosMensal').value;
            const taxaAnualSpan = document.getElementById('taxaAnual');
            
            if (taxaMensal && parseFloat(taxaMensal.replace(',', '.')) > 0) {
                const mensal = parseFloat(taxaMensal.replace(',', '.')) / 100;
                const anual = (Math.pow(1 + mensal, 12) - 1) * 100;
                taxaAnualSpan.innerHTML = `<i class="bi bi-info-circle me-1"></i>Taxa anual equivalente: ${anual.toFixed(1)}%`;
            }
        }

        function calculateInterest() {
            const valorInicial = document.getElementById('ValorInicial');
            const aporte = document.getElementById('AporteMensal');
            const taxa = document.getElementById('TaxaJurosMensal');
            
            if (valorInicial.value && taxa.value && 
                parseFloat(valorInicial.value.replace(',', '.')) > 0 &&
                parseFloat(taxa.value.replace(',', '.')) > 0) {
                // Update annual rate
                updateAnualRate();
            }
        }

        function clearForm() {
            document.getElementById('jurosForm').reset();
            document.getElementById('taxaAnual').innerHTML = 'Taxa anual equivalente será calculada';
            location.reload();
        }

        // Format initial values and setup events
        document.addEventListener('DOMContentLoaded', function() {
            const currencyInputs = document.querySelectorAll('#ValorInicial, #AporteMensal');
            currencyInputs.forEach(input => {
                if (input.value) {
                    formatCurrency(input);
                }
            });

            // Update annual rate on load
            updateAnualRate();
        });
    </script>
}

<!-- SEO Schema -->
<script type="application/ld+json">
{
  "@@context": "https://schema.org",
  "@@type": "WebApplication",
  "name": "Calculadora de Juros Compostos",
  "description": "Calcule juros compostos e simule seus investimentos",
  "url": "@Context.Request.GetDisplayUrl()",
  "applicationCategory": "Finance",
  "operatingSystem": "Web"
}
</script>